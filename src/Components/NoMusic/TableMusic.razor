@namespace ComponentsCustom.NoMusic

<MudTable Items="@NoMusicList" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@Loading" LoadingProgressColor="Color.Info">
    <HeaderContent>
        <MudTh>_</MudTh>
        <MudTh>Canci贸n</MudTh>
        <MudTh>Artista</MudTh>
        <MudTh>BPM</MudTh>
        <MudTh>Tonalidad</MudTh>
        <MudTh>Duraci贸n</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="_">
            <audio controls>
                <source src="@context.GetEmbedLink()" type="audio/wav">
            </audio>
        </MudTd>
        <MudTd DataLabel="Canci贸n">@context.title</MudTd>
        <MudTd DataLabel="Artista">@context.artist</MudTd>
        <MudTd DataLabel="BPM">@context.bpm</MudTd>
        <MudTd DataLabel="Tonalidad">@context.tone</MudTd>
        <MudTd DataLabel="Duraci贸n">@context.duration</MudTd>
    </RowTemplate>
</MudTable>

@code 
{
    [Parameter]
    public string? Path {get; set;}

    public List<NoMusic> NoMusicList {get; set;} = new List<NoMusic>();
    public bool Loading = true;

    protected override async Task OnInitializedAsync()
    {
        await LoadNoMusic();
        Loading = false;
        StateHasChanged();
    }

    private async Task LoadNoMusic()
    {
        NoMusicList = await NoMusic.GetData(path: Path);
    }
}